<div class="debug-panel"
     *ngIf="debugMode">
    <h3>Mode D√©bogage</h3>

    <!-- Progress Section -->
    <div class="debug-section progress-section">
        <h4>Progression</h4>
        <div class="progress-info">
            <div class="info-row">
                <span class="label">Progression :</span>
                <span class="value progress-value">
                    {{ completedSteps }} / {{ totalSteps }} √©tapes ({{ progressPercentage }}%)
                </span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill"
                     [style.width.%]="progressPercentage"></div>
            </div>
        </div>
    </div>

    <!-- Time Tracking Section -->
    <div class="debug-section time-section">
        <h4>Temps de Parcours</h4>
        <div class="info-row">
            <span class="label">Temps Total :</span>
            <span class="value time-value">{{ totalElapsedTime }}</span>
        </div>
        <div class="info-row"
             *ngIf="currentStep">
            <span class="label">Temps √âtape Actuelle :</span>
            <span class="value time-value">{{ currentStepElapsedTime }}</span>
        </div>
    </div>

    <!-- Step Information Section -->
    <div class="debug-section step-section"
         *ngIf="currentStep">
        <h4>√âtape Actuelle (Suivi)</h4>
        <div class="info-row">
            <span class="label">Titre :</span>
            <span class="value">{{ currentStep.title }} (ID: {{ currentStep.id }})</span>
        </div>
        <div class="info-row"
             *ngIf="currentStepForView && currentStepForView.id !== currentStep.id">
            <span class="label">√âtape Affich√©e :</span>
            <span class="value">{{ currentStepForView.title }} (ID: {{ currentStepForView.id }})</span>
        </div>
    </div>

    <!-- Location Section -->
    <div class="debug-section location-section">
        <h4>G√©olocalisation</h4>
        <div class="info-row"
             *ngIf="currentCoordinates">
            <span class="label">Vos Coordonn√©es :</span>
            <span class="value">
                {{ currentCoordinates.lat.toFixed(6) }}, {{ currentCoordinates.lng.toFixed(6) }}
            </span>
        </div>

        <div class="info-row"
             *ngIf="currentStep && currentStep.coordinates">
            <span class="label">Coordonn√©es Cibles :</span>
            <span class="value">
                {{ currentStep.coordinates.lat.toFixed(6) }}, {{ currentStep.coordinates.lng.toFixed(6) }}
            </span>
        </div>

        <div class="info-row">
            <span class="label">Distance √† la Cible :</span>
            <span class="value"
                  [ngClass]="{'near-target': isCloseToTarget()}">
                {{ formatDistance(currentDistance) }}
            </span>
        </div>
    </div>

    <!-- Postponable Steps Section -->
    <div class="debug-section postponable-steps-section"
         *ngIf="debugMode && postponableSteps.length > 0">
        <h4>√âtapes disponibles pour interversion</h4>
        <div class="hint-text">
            Cliquez sur une √©tape pour l'intervertir avec l'√©tape courante
        </div>
        <div class="postponable-steps">
            <div class="step-item"
                 *ngFor="let step of postponableSteps"
                 (click)="makeStepCurrent(step)"
                 [class.current]="currentStep && step.id === currentStep.id">
                <div class="step-title">
                    {{ step.title }}
                    <span class="step-year">({{ step.year }})</span>
                </div>
                <div class="step-action">
                    <span class="action-icon"
                          *ngIf="currentStep && step.id !== currentStep.id">‚áù</span>
                    <span class="current-indicator"
                          *ngIf="currentStep && step.id === currentStep.id">Actuelle</span>
                </div>
            </div>
        </div>
    </div>

    <div class="debug-section photos-section"
         *ngIf="debugMode">
        <h4>Gestion des Photos</h4>
        <div class="photos-info">
            <div class="info-row">
                <span class="label">Photos sauvegard√©es :</span>
                <span class="value">{{ hasPhotos ? 'Oui' : 'Non' }}</span>
            </div>
        </div>
        <div class="debug-actions">
            <button class="button info"
                    (click)="exportPhotos()"
                    [disabled]="!hasPhotos">
                <span>üì•</span> Exporter les photos
            </button>
            <button class="button warning"
                    (click)="clearPhotos()"
                    [disabled]="!hasPhotos">
                <span>üóëÔ∏è</span> Effacer toutes les photos
            </button>
        </div>
    </div>

    <!-- Actions Section -->
    <div class="debug-section actions-section">
        <h4>Actions</h4>
        <div class="debug-actions">
            <button class="button accent"
                    (click)="simulateLocation()">
                Simuler l'arriv√©e
            </button>
            <button class="button warning"
                    (click)="resetHunt()">
                R√©initialiser le p√®lerinage
            </button>
            <button class="button info"
                    *ngIf="canCurrentStepBePostponed()"
                    (click)="postponeCurrentStep()">
                Repousser l'√©tape
            </button>
        </div>
    </div>

    <div class="debug-toggle"
         (click)="toggleDebug()">
        <span>{{ debugMode ? 'Mode D√©bogage Activ√©' : '‚öôÔ∏è' }}</span>
    </div>
</div>